import{a as A,u as E,r as m,j as e}from"./index-Wg7AEioM.js";import{N as P,R as v,P as T,b as L,C as O,T as w,B as R,c as F,X as _,Y as U,L as $,a as k,A as g}from"./PieChart-BU5DHqQy.js";function I(){const{designerName:i}=A(),H=E(),[c,B]=m.useState([]),[D,f]=m.useState(!0),[d,C]=m.useState({totalProjects:0,onTrack:0,overBudget:0,efficiency:0}),S=async()=>{try{f(!0);const s=g.USE_CSV_MODE?g.API_URL:g.GOOGLE_SHEETS_API_URL,l=await(await fetch(s)).json();if(l.success&&l.data){const a=l.data.filter(r=>(r.designerName||r["Designer Name"]||"")===i);B(a);const n=a.length;let o=0,x=0,p=0;a.forEach(r=>{const j=r.actualHours||r["Actual Hours"]||0,N=r.raisedBenchmarkingHours||r["Raised Benchmarking Hours"]||0,y=N>0?j/N*100:0;y<=100?o++:x++,p+=y}),C({totalProjects:n,onTrack:o,overBudget:x,efficiency:n>0?(p/n).toFixed(1):0})}}catch(s){console.error("Error fetching designer data:",s)}finally{f(!1)}};m.useEffect(()=>{i&&S()},[i]);const h={};c.forEach(s=>{const t=s.teamName||s["Team Name"]||"Unknown";h[t]=(h[t]||0)+1});const u=Object.entries(h).map(([s,t])=>({name:s,value:t})),b=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return D?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#005587"}}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading designer details..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(P,{onSearch:()=>{}}),e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-[1800px] mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>H("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-2xl font-bold text-[#00699E]",children:"Designer Performance"}),e.jsx("div",{className:"w-32"})]})}),"      ",e.jsxs("main",{className:"max-w-[1800px] mx-auto px-4 py-8",children:["        ",e.jsx("div",{className:"rounded-xl shadow-lg p-8 mb-8 text-white",style:{background:"linear-gradient(to right, #005587, #003d5c)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12",style:{color:"#005587"},fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-1 text-white",children:i}),e.jsx("p",{className:"text-white opacity-90",children:"Performance Overview"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4",style:{borderLeftColor:"#005587"},children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Total Projects"}),e.jsx("p",{className:"text-4xl font-bold",style:{color:"#005587"},children:d.totalProjects})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"On Track"}),e.jsx("p",{className:"text-4xl font-bold text-green-600",children:d.onTrack})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Over Budget"}),e.jsx("p",{className:"text-4xl font-bold text-red-600",children:d.overBudget})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Efficiency"}),e.jsxs("p",{className:"text-4xl font-bold text-purple-600",children:[d.efficiency,"%"]})]})]}),"        ",e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[u.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Team Distribution"}),e.jsx(v,{width:"100%",height:350,children:e.jsxs(T,{children:[e.jsx(L,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s}: ${(t*100).toFixed(0)}%`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:u.map((s,t)=>e.jsx(O,{fill:b[t%b.length]},`cell-${t}`))}),e.jsx(w,{})]})})]}),c.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Actual vs Benchmark Hours"}),e.jsx(v,{width:"100%",height:350,children:e.jsxs(R,{data:c.map((s,t)=>({name:`P${t+1}`,actualHours:s.actualHours||s["Actual Hours"]||0,benchmarkHours:s.raisedBenchmarkingHours||s["Raised Benchmarking Hours"]||0})),margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(_,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),e.jsx(U,{label:{value:"Hours",angle:-90,position:"insideLeft"},tick:{fontSize:12}}),e.jsx(w,{contentStyle:{backgroundColor:"white",border:"1px solid #ccc",borderRadius:"8px"},labelStyle:{fontWeight:"bold",color:"#333"}}),e.jsx($,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),e.jsx(k,{dataKey:"actualHours",fill:"#22c55e",name:"Actual Hours",radius:[8,8,0,0]}),e.jsx(k,{dataKey:"benchmarkHours",fill:"#ef4444",name:"Benchmark Hours",radius:[8,8,0,0]})]})})]})]}),"        ",e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"All Projects"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#005587"},className:"text-white",children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Team Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"End Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Actual Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Benchmark Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Status"})]})}),e.jsx("tbody",{children:c.map((s,t)=>{const l=s.actualHours||s["Actual Hours"]||0,a=s.raisedBenchmarkingHours||s["Raised Benchmarking Hours"]||0,n=a>0?l/a*100:0,o=n<=100?"On Track":"Over Budget",x=n<=100?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm",children:s.teamName||s["Team Name"]||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:s.startDate||s["Start Date"]||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:s.endDate||s["End Date"]||"N/A"}),e.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:[l,"h"]}),e.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:[a,"h"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${x}`,children:o})})]},t)})})]})})]})]})]})}export{I as default};
